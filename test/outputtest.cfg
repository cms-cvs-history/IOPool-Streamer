process PROD  = {
    untracked PSet maxEvents = {untracked int32 input = 20}
    untracked PSet options = { untracked bool wantSummary = true }

    source = EmptySource {}

    module m1 = StreamThingProducer {
     int32 array_size = 200000 # 20000
     int32 instance_count=5
    }

    module a1 = StreamThingAnalyzer { string product_to_get="m1" }

        module pre1 = Prescaler { int32 prescaleFactor = 5 }
        module pre2 = Prescaler { int32 prescaleFactor = 2 }

    module out = EventStreamFileWriter {
      int32 max_event_size = 7000000
      int32 max_queue_depth = 5
          bool use_compression = false
          int32 compression_level = 1

      string fileName = "teststreamfile.dat"
      string indexFileName = "testindexfile.ind"
      # untracked int32 numPerFile = 5

      untracked PSet SelectEvents = { vstring SelectEvents={"p2"}} 

    }

        path p1 = { m1, a1}
        path p2 = { m1, pre1 }
        path p3 = { m1, pre2 }
        #endpath e1 = { out }
        #endpath e2 = { m1, pre2, out}
        endpath e3 = { m1, out}
}
